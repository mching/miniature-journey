---
title: "Exploring Disabled List Data from Major League Baseball"
author: "Michael Ching"
date: "2017-06-09"
draft: true
slug: DL-data-exploration
categories:
  - R
tags:
  - baseball
  - sports
---



<pre class="r"><code>library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(ggplot2)
library(tidyr)
DL &lt;- read.csv(&quot;../datasets/DL2010_2016.csv&quot;)
DL &lt;- tbl_df(DL)
str(DL)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3509 obs. of  19 variables:
##  $ Last_name         : Factor w/ 888 levels &quot;&quot;,&quot;Aardsma&quot;,&quot;Abad&quot;,..: 518 95 481 796 104 680 535 349 140 868 ...
##  $ First_name        : Factor w/ 446 levels &quot;&quot;,&quot;A.J.&quot;,&quot;Aaron&quot;,..: 90 41 220 254 371 249 172 239 48 349 ...
##  $ Name              : Factor w/ 1552 levels &quot;A.J. Burnett&quot;,..: 396 143 744 921 1296 885 612 818 186 1260 ...
##  $ DL_type           : int  15 60 15 60 15 15 15 15 15 15 ...
##  $ Season            : int  2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 ...
##  $ Team              : Factor w/ 34 levels &quot;&quot;,&quot;Angels&quot;,&quot;Astros&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Position          : Factor w/ 32 levels &quot;&quot;,&quot;1B&quot;,&quot;1B/2B&quot;,..: 27 27 21 27 21 21 27 27 25 25 ...
##  $ on_DL             : Factor w/ 1051 levels &quot;2010-04-04&quot;,&quot;2010-04-05&quot;,..: 1 1 1 1 2 2 2 2 2 2 ...
##  $ off_DL            : Factor w/ 993 levels &quot;2010-04-04&quot;,&quot;2010-04-10&quot;,..: 17 47 80 136 1 2 3 4 5 5 ...
##  $ days              : int  27 64 108 182 -1 5 6 7 9 9 ...
##  $ censored_right    : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Location          : Factor w/ 228 levels &quot;&quot;,&quot;abdomen&quot;,&quot;abdomen wall&quot;,..: 145 86 107 51 23 109 181 51 149 90 ...
##  $ Injury_type       : Factor w/ 177 levels &quot;&quot;,&quot;Achilles tendon&quot;,..: 127 127 81 122 68 141 28 127 127 127 ...
##  $ Side              : Factor w/ 44 levels &quot;&quot;,&quot;11th&quot;,&quot;both&quot;,..: 1 28 1 28 1 1 28 28 8 28 ...
##  $ PlayerId          : Factor w/ 1451 levels &quot;&quot;,&quot;0&quot;,&quot;1002&quot;,..: 1081 665 1042 1177 245 620 405 699 838 771 ...
##  $ Location_recode   : Factor w/ 127 levels &quot;&quot;,&quot;abdominal&quot;,..: 77 46 58 29 11 59 94 29 80 48 ...
##  $ Injury_type_recode: Factor w/ 176 levels &quot;&quot;,&quot;Achilles tendon&quot;,..: 127 127 81 122 68 141 28 127 127 127 ...
##  $ Side_recode       : Factor w/ 37 levels &quot;&quot;,&quot;11th&quot;,&quot;both&quot;,..: 1 24 1 24 1 1 24 24 8 24 ...
##  $ Position_recode   : Factor w/ 31 levels &quot;&quot;,&quot;1B&quot;,&quot;1B/2B&quot;,..: 27 27 21 27 21 21 27 27 25 25 ...</code></pre>
<pre class="r"><code>DL$on_DL &lt;- as.POSIXct(DL$on_DL)
DL$off_DL &lt;- as.POSIXct(DL$off_DL)</code></pre>
<pre class="r"><code>summary(DL$days)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  -87.00   20.00   36.00   56.63   74.00  185.00</code></pre>
<p>Negative DL days? Let’s look those up…</p>
<pre class="r"><code>which(DL$days &lt; 0)</code></pre>
<pre><code>## [1]   5 331 428</code></pre>
<pre class="r"><code>DL[which(DL$days &lt; 0),]</code></pre>
<pre><code>## # A tibble: 3 × 19
##   Last_name First_name            Name DL_type Season   Team Position
##      &lt;fctr&gt;     &lt;fctr&gt;          &lt;fctr&gt;   &lt;int&gt;  &lt;int&gt; &lt;fctr&gt;   &lt;fctr&gt;
## 1   Branyan    Russell Russell Branyan      15   2010               I
## 2   Bradley     Milton  Milton Bradley      15   2010               O
## 3  Hairston      Jerry  Jerry Hairston      15   2010               I
## # ... with 12 more variables: on_DL &lt;dttm&gt;, off_DL &lt;dttm&gt;, days &lt;int&gt;,
## #   censored_right &lt;lgl&gt;, Location &lt;fctr&gt;, Injury_type &lt;fctr&gt;,
## #   Side &lt;fctr&gt;, PlayerId &lt;fctr&gt;, Location_recode &lt;fctr&gt;,
## #   Injury_type_recode &lt;fctr&gt;, Side_recode &lt;fctr&gt;, Position_recode &lt;fctr&gt;</code></pre>
<p>Some googling showed what happened with these DL stints. Russell Branyan started 2010 on the DL with a herniated disk (<a href="http://waitingfornextyear.com/2010/03/russell-branyan-to-start-season-on-dl/">source</a>) and came off the DL around April 20 (<a href="https://www.youtube.com/watch?v=1xrkb5elJnY">source</a>). Milton Bradley ended this season on DL after being placed on it in July for knee injury. Hairston was injured in September with a fractured right tibia. I’ll manually recode Branyan’s off DL date to April 20 and the others to the end of the season.</p>
<pre class="r"><code>DL %&gt;% filter(Season == 2010) %&gt;% summarize(max(off_DL))</code></pre>
<pre><code>## # A tibble: 1 × 1
##   `max(off_DL)`
##          &lt;dttm&gt;
## 1    2010-10-03</code></pre>
<pre class="r"><code>DL$off_DL[which(DL$days &lt;0)] &lt;- as.POSIXct(c(&quot;2010-04-20&quot;, &quot;2010-10-03&quot;, &quot;2010-10-03&quot;))
DL$days[which(DL$days &lt;0)] &lt;- as.integer(DL$off_DL[which(DL$days &lt;0)] - DL$on_DL[which(DL$days &lt;0)])</code></pre>
<p>Here is the summary of injury by anatomical location.</p>
<pre class="r"><code>DL %&gt;% filter(censored_right == F) %&gt;% group_by(Location_recode) %&gt;% 
  filter(length(days) &gt; 2) %&gt;% summarize(mean(days), sd(days)) </code></pre>
<pre><code>## # A tibble: 50 × 3
##    Location_recode `mean(days)` `sd(days)`
##             &lt;fctr&gt;        &lt;dbl&gt;      &lt;dbl&gt;
## 1                      25.66667   7.505553
## 2        abdominal     34.73684  24.204779
## 3         achilles     37.57143  23.044153
## 4            ankle     40.39437  28.049690
## 5              arm     50.42857  50.414473
## 6             back     35.34416  31.940382
## 7           biceps     33.51351  24.271178
## 8          big toe     25.66667  11.590226
## 9             calf     31.41071  24.997292
## 10           chest     43.33333  26.159766
## # ... with 40 more rows</code></pre>
<p>Here is the summary by</p>
<pre class="r"><code>DL %&gt;% filter(censored_right == F) %&gt;% group_by(Injury_type_recode) %&gt;% 
  filter(length(days) &gt; 2) %&gt;% summarize(mean(days), sd(days))</code></pre>
<pre><code>## # A tibble: 43 × 3
##    Injury_type_recode `mean(days)` `sd(days)`
##                &lt;fctr&gt;        &lt;dbl&gt;      &lt;dbl&gt;
## 1                         29.66667  17.953644
## 2        appendicitis     28.00000  13.341664
## 3   Avulsion fracture     42.33333  54.418134
## 4             blister     26.00000   8.625543
## 5         bone bruise     30.00000  15.924823
## 6             bruised     26.36842  18.626371
## 7            bursitis     35.00000  28.801042
## 8          concussion     23.65116  26.224716
## 9           contusion     30.00000  18.845424
## 10         discomfort     44.60000  32.249720
## # ... with 33 more rows</code></pre>
