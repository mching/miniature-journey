<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Simple Secret Santa Picker  &middot; Dripping Data</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="random, ">


<meta property="og:title" content="Simple Secret Santa Picker  &middot; Dripping Data ">
<meta property="og:site_name" content="Dripping Data"/>
<meta property="og:url" content="/2016/12/09/simple-secret-santa-picker/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2016-12-09T00:00:00Z" />
<meta property="og:article:modified_time" content="2016-12-09T00:00:00Z" />

  
    
<meta property="og:article:tag" content="random">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="Simple Secret Santa Picker" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="/2016/12/09/simple-secret-santa-picker/" />
<meta name="twitter:domain" content="/">
  

  
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Simple Secret Santa Picker",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2016-12-09",
    "description": "",
    "wordCount": 463
  }
</script>
  



<link rel="canonical" href="../../../../2016/12/09/simple-secret-santa-picker/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../touch-icon-144-precomposed.png">
<link rel="icon" href="../../../../favicon.png">
<meta name="generator" content="Hugo 0.24.1" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="../../../../css/bootswatch/default/bootstrap.min.css">


<link rel="stylesheet" href="../../../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../../../css/style.css">




  <link rel="stylesheet" href="../../../../css/highlight/default.css">


</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
          
          <a class="navbar-brand-img" href="../../../../">
            <img alt="" src="">
            
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">

              <a href="../../../../" >
                
                Blog
              </a>
            </li>
            
            <li class="">

              <a href="../../../../about/" >
                
                About
              </a>
            </li>
            
            <li class="">

              <a href="https://www.linkedin.com/in/michael-ching-033a5029" >
                
                LinkedIn
              </a>
            </li>
            
            <li class="">

              <a href="https://twitter.com/mikec2a" >
                
                Twitter
              </a>
            </li>
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>


<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="text-center">

    <h1>Simple Secret Santa Picker
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2016-12-09">9 Dec, 2016</time>
</small>


  <small>
    &middot; by Michael Ching
  
  &middot; Read in about 3 min
  &middot; (463 words)
  &middot; 
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Simple%20Secret%20Santa%20Picker&amp;url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f&amp;title=Simple%20Secret%20Santa%20Picker" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Simple%20Secret%20Santa%20Picker&amp;body=Check out this site %2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  </small>

<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="../../../../tags/random" class="label label-primary">random</a>
  


</div>

<br>
</div>

  </div>
</div>

      <div class="content">
  <p><a href="https://thepracticalr.wordpress.com/2016/12/07/secret-santa-picker-2-using-r/">A post about automating Secret Santa assignments</a> popped up in my Facebook feed the other day. This being the Christmas season, I took a look. It seemed a bit complex, and I wondered if I could make it more efficient.</p>
<p>The <a href="https://thepracticalr.wordpress.com/2016/12/07/secret-santa-picker-2-using-r/">original function</a> took in a list of people (e.g., Ann, Bill, Chris). Using a nested while-for loop, it randomly picked a name (Bill), and matched it to the first person in the list (Ann:Bill). If the same person was picked (Ann:Ann), it picked again to try to find another name. In the end it returned results like this:</p>
<pre><code>&gt; secret_santa(3, santas)
     [,1]    [,2]  [,3]   
[1,] &quot;Ann&quot;   &quot;has&quot; &quot;Bill&quot; 
[2,] &quot;Bill&quot;  &quot;has&quot; &quot;Chris&quot;
[3,] &quot;Chris&quot; &quot;has&quot; &quot;Ann&quot;  </code></pre>
<p>I guessed that another way to do it might be to just randomize the list and then have each person be assigned the next one on the list. This is what I came up with.</p>
<pre class="r"><code>secret_santa &lt;- function(santas) {
  random_santas &lt;- sample(santas) # Randomize santas
  recipients &lt;- random_santas[c(2:length(random_santas), 1)] # Move everyone down one
  gift_assignments &lt;- paste(random_santas, &quot;has&quot;, recipients) # Make readable list
  data.frame(sort(gift_assignments)) # Return alphabetically ordered list
}</code></pre>
<p>Here’s an example of how it works.</p>
<pre class="r"><code>set.seed(1)
santas &lt;- c(&quot;Maria&quot;, &quot;Tiffany&quot;, &quot;Mike&quot;, &quot;Bob&quot;, &quot;Josh&quot;, &quot;Melanie&quot;)
secret_santa(santas)</code></pre>
<pre><code>##   sort.gift_assignments.
## 1          Bob has Maria
## 2       Josh has Tiffany
## 3         Maria has Josh
## 4       Melanie has Mike
## 5           Mike has Bob
## 6    Tiffany has Melanie</code></pre>
<p>In doing more research on this problem, it turns out that the assignment of Secret Santas is related to the mathematical concept of derangements. From <a href="https://en.wikipedia.org/wiki/Derangement">Wikipedia</a>: “In combinatorial mathematics, a derangement is a permutation of the elements of a set, such that no element appears in its original position.”</p>
<p>The number of derangements of a set of size <em>n</em> can be calculated as:</p>
<p><span class="math display">\[!n=n!\sum _{i=0}^{n}{\frac {(-1)^{i}}{i!}}\]</span></p>
<p>My simplistic solution consists of one closed cycle of people (everyone just gives to the next person). However, there are also derangements such as A:B, B:A, C:D, D:C where you have a cycle of people that is 2 or more in length.</p>
<p>This could be something you would want to avoid. For example you could have a big family Secret Santa and a husband could be paired to his wife and vice-versa. My solution would avoid there being a small closed cycle like this, but it would still permit husband:wife.</p>
<p>My solution is a subset of the total possible derangements, and this begs the question, what percentage of all possible derangements are a cycle of the whole group?</p>
<p>A quick Google search brought up <a href="https://www.rose-hulman.edu/mathjournal/archives/2006/vol7-n1/paper5/v7n1-5pd.pdf">this paper</a> which in turn led me to <a href="http://www.jstor.org/stable/3622033">this paper</a>. My math skills are very rusty at this point, so I’m not sure what the answer is, but it seems that an exact solution can be calculated!</p>

</div>


      <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Simple%20Secret%20Santa%20Picker&amp;url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f&amp;title=Simple%20Secret%20Santa%20Picker" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Simple%20Secret%20Santa%20Picker&amp;body=Check out this site %2f2016%2f12%2f09%2fsimple-secret-santa-picker%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="../../../../2016/11/30/unlucky-fantasy-football/" title="An Unlucky Fantasy Football Season Is Over">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="../../../../2016/12/14/pidgey-evolution/" title="Pidgey Evolution: Effects on Combat Power and Hit Points">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

    </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
</small>
</div>


    


        </div>
    </div>
  </div>
</footer>

    

<script src="//s3.amazonaws.com/mailmunch/static/site.js" id="mailmunch-script" data-mailmunch-site-id="" async="async"></script>



<script src="//load.sumome.com/" data-sumo-site-id="" async="async"></script>

<script src="../../../../js/jquery.min.js"></script>
<script src="../../../../js/bootstrap.min.js"></script>

<script src="../../../../js/angular.min.js"></script>
<script src="../../../../js/popover/angular-storage.min.js"></script>
<script src="../../../../js/highlight.pack.js"></script>
<script src="../../../../js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
var ENABLE_POPOVER = "", 
EXPIRE_COOKIE = "", 
SHOW_MODAL_TIMEOUT = "", 
MOUSE_LEAVE = "", 
MODAL_SIZE = "", 
POST_URL = "", 
SIGNUP_HEADER = "",
HEADER_IMAGE = "",
IMG_DESCRIPTION = "",
SIGNUP_TEXT = "",
INPUT_PLACEHOLDER = "",
SUBMIT_BUTTON = "",
SUCCESS_MESSAGE = "",
ERROR_MESSAGE = "",
OPTIN = "",
COOKIE_NAME = "",
CONTENTLANGUAGE = ""; 
</script>

<script src="../../../../js/popover/angular-modal-service.min.js"></script>
<script src="../../../../js/angular-ismobile.min.js"></script>
<script src="../../../../js/popover/popover.min.js"></script>


<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax//MathJax.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax//config/TeX-AMS-MML_HTMLorMML.js"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    for(var all in MathJax.Hub.getAllJax()) {
        all.SourceElement().parentNode.className += ' has-jax';

    }
});
</script>






  </body>
</html>

